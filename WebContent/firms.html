<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html lang="en">

<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<meta name="description" content="Web-mapping application to display information on FIRMS marine resources and fisheries" />
	<meta name="author-corporate" content="FAO of the UN" />
	<meta name="copyright" content="http://www.fao.org/corp/copyright/en/" />
	<meta name="keywords" content="FIRMS, Marine Resource, Stock, Fishery, Map, FAO" />
	<title>FIRMS Stocks and Fisheries Map Viewer</title>

	<!-- FigisMap -->
	<link rel="stylesheet" type="text/css" href="js/vendor/ol3/ol3-figismap.css"></link>
	<script type="text/javascript" src="js/FigisMap.js"></script>

	<!-- FIRMS viewer -->
	<link rel="stylesheet" href="css/firms.css" type="text/css" />
	<script type="text/javascript" src="js/firms.js"></script>
	<script type="text/javascript">
		// <!--
		window.onresize = function(event) {
			adjustHeight();
		};
		function adjustHeight() {
			var ise = !! ( document.body.className=='embed' );
			var w = parseInt(window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth);
			var h = parseInt(window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight);
			if ( !ise ) h = h - 100;
			var dh = parseInt( parseInt(w) / 1.8 );
			if ( dh > 768 ) dh = 768;
			var mw = document.getElementById('mapWrapper');
			if ( dh > h ) {
				mw.style.height = h + 'px';
				mw.style.bottom = '0px';
			} else {
				mw.style.height = dh + 'px';
				mw.style.bottom = 'auto';
			}
		}
		function openSearch() {
			var s = document.getElementById('ftsContainer');
			if ( s.className == 'closed' ) {
				var l = document.getElementById('resourceSwitcher-'+FV.currentLayer()).nextSibling;
				if ( l.nodeName != 'label' ) l = l.nextSibling;
				var t = document.getElementById('ftsTitle');
				t.innerHTML = '';
				s.className = 'open';
				s.setAttribute('class','open');
				t.innerHTML = 'Search: <span>' + l.innerHTML + '</span>';
				with ( document.getElementById('ftsText') ) {
					focus();
					select();
				};
			}
		}
		function closeSearch() {
			var s = document.getElementById('ftsContainer');
			if ( s.className == 'open' ) {
				document.getElementById('ftsText').blur();
				setTimeout("document.getElementById('ftsContainer').className='closed'",10);
				setTimeout("document.getElementById('ftsContainer').setAttribute('class','closed')",10);
			}
		}
		//-->
	</script>
</head>

<body onload="FigisMap.init( FV.init )">
	<script type="text/javascript" language="javascript">
	// <![CDATA[
		if ( location.search.indexOf("embed=") != -1 ) {
			document.body.className='embed';
			document.body.setAttribute('class','embed');
		}
		setTimeout( adjustHeight, 10 );
	// ]]>
	</script>
	<div id="wrapper">
		<div id="header">
			<div id="top1">
				<table width="100%" cellpadding="0" cellspacing="0" border="0">
					<tr>
						<td align="left">
							<img border="0" src="img/firms/sitelogotext.png" alt="" title=""/>
						</td>
						<td align="right">
							<img border="0" src="img/firms/sitelogoimage.png" alt="" title=""/>
						</td>
					</tr>
				</table>
			</div>
			<div id="top2">
				<span>Stocks and Fisheries Map Viewer</span>
			</div>
		</div>
		<!-- Map wrapper -->
		<div id="mapWrapper">
			<div id="main">
				<div id="map" class="map"></div>
				<div id="resourceSwitcher">
					<div id="resourceSwitcherPanelResource">
						<input type="radio" name="SelectLayer" onchange="FV.switchLayer(this.value)" value="resource" id="resourceSwitcher-resource" />
						<label for="resourceSwitcher-resource">Marine Resources</label>
					</div>
					<div id="resourceSwitcherPanelFishery">
						<input type="radio" name="SelectLayer" onchange="FV.switchLayer(this.value)" value="fishery" id="resourceSwitcher-fishery" />
						<label for="resourceSwitcher-fishery">Fisheries</label>
					</div>
				</div>
				<div id="ftsContainer" class="closed" onclick="openSearch();">
					<img src="img/firms/search.png" class="iconSearch" alt="" />
					<div id="ftsBox">
						<div id="ftsTitle"></div>
						<div id="ftsCloser" onclick="closeSearch();">âœ–</div>
						<input type="search" name="filterSearch" id="ftsText" value=""
							placeholder="Text to search for" autosave="FIRMSviewer" results="10"
							onmouseover="this.focus();this.select();"
							onkeyup="FV.fts.filter(false)"
							onclick="FV.fts.filter(true)"
							onchange="FV.fts.filter(true)"
						/>
						<div id="ftsResult"></div>
					</div>
				</div>
				<div id="projectionPanel" class="sidePanel">
					<h4>Projection</h4>
					<blockquote>
						<div>
							<input type="radio" name="SelectSRS" onchange="FV.switchProjection(this.value)" value="4326" checked="checked" id="SelectSRS4326" />
							<label for="SelectSRS4326">WGS84 (4326)</label>
						</div>
						<div>
							<input type="radio" name="SelectSRS" onchange="FV.switchProjection(this.value)" value="3349" id="SelectSRS3349" />
							<label for="SelectSRS3349">Mercator (3857)</label>
						</div>
					<blockquote>
				</div>
				<div id="linkPanel" class="sidePanel" onmouseover="FV.setViewerEmbedLink()">
					<h4>Link</h4>
					<blockquote>
						<div>
							<label for="firms-link">Paste the link in email or chat</label>
							<input id="firms-link" type="text" readonly="readonly" value="" onclick="this.focus();this.select();" /> 
						</div>
						<div>
							<label for="firms-html">Paste the HTML in a web site</label>
							<input id="firms-html" type="text" readonly="readonly" value="" onclick="this.focus();this.select();" />
						</div>
						<div>
							<label for="firms-embed">Paste the link to embed the map</label>
							<input id="firms-embed" type="text" readonly="readonly" value="" onclick="this.focus();this.select();" />
						</div>
					<blockquote>
				</div>
				<div id="progressIndicator" style="display:none;">
					<div id="progressIndicatorValue"></div>
				</div>
				<div id="bottomBar1">
					<a title="FAO Copyright" target="_blank" href="http://www.fao.org/contact-us/terms/en/">
						&copy;&nbsp;FAO,
						<span id="copyYear">2011</span>
						&nbsp;
					</a>
				</div>
			</div>
		</div>
	</div>
	<script type="text/javascript">
	// <![CDATA[
		function updateCopyYear() {
			var uy = new Date();
			uy = parseInt(uy.getFullYear() ? uy.getFullYear() : uy.getYear());
			
			// Update the year value for the FAO copyright
			var py = parseInt( document.getElementById('copyYear').innerHTML );
			if ( isNaN(uy) || isNaN(py) ) return void(0);
			if ( uy > py ) document.getElementById('copyYear').innerHTML = String( uy );
			
			return void(0);
		}
		updateCopyYear();
	// ]]>
	</script>

</body>
</html>
