Following the OpenLayers classes are been customized in order to 
manage the Legend visiualizzation inside the LayerSwitcher (the source code is in 'modified' directory):

OpenLayers.Map
OpenLayers.Layer.WMS
OpenLayers.Control.LayerSwitcher

The modifications are already provided inside the OpenLayers.js compressed.
